<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Creating Tools &mdash; Literally Canvas v0.4.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/better.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Literally Canvas v0.4.0 documentation" href="../index.html" />
    <link rel="up" title="API" href="index.html" />
    <link rel="next" title="Utilities" href="util.html" />
    <link rel="prev" title="Shapes" href="shapes.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
      <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Finger+Paint" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
      <link rel="stylesheet" href="../_static/lib/css/literallycanvas.css" type="text/css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/react/0.10.0/react-with-addons.js" type="text/javascript"></script>
    <script src="../_static/lib/js/fastclick.js" type="text/javascript"></script>
    <script src="../_static/lib/js/ie_customevent.js" type="text/javascript"></script>
    <script src="../_static/lib/js/literallycanvas.js" type="text/javascript"></script>
    <script src="../_static/lib/js/literallycanvas.jquery.js" type="text/javascript"></script>
    <script src="../_static/docs.js" type="text/javascript"></script>
  </head>
  <body>
  <header id="pageheader"><h1><a href="../index.html ">
    <span class="title-word-1">Literally</span>
    <span class="title-word-2">&ldquo;Canvas&rdquo;</span>
  </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="shapes.html" title="Previous document">Shapes</a>
        </li>
        <li>
          <a href="util.html" title="Next document">Utilities</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Home</a></li>
      <li>
        <a href="index.html">API</a>
      </li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="creating-tools">
<h1>Creating Tools<a class="headerlink" href="#creating-tools" title="Permalink to this headline">¶</a></h1>
<p>Literally Canvas tools are defined using an oversimplified api <a class="footnote-reference" href="#f1" id="id1">[1]</a>. Each
tool defines an icon, an &#8220;options style,&#8221; and three <em>lifecycle methods</em> to
start, continue, and end an operation.</p>
<p>If this section is not clear enough, please file and issue on GitHub and we
will try to improve it.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If your method of adding tools is to fork the project, <strong>please don&#8217;t</strong>.
If you need custom tools for your particular application, you can do that
without changing Literally Canvas&#8217;s source code. That is the entire purpose
of this API.</p>
<p class="last">If you want to <em>contribute</em> a tool to the project, then by all means, clone
the repository and send us a pull request.</p>
</div>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>A more powerful tool API is a high-priority goal for the next major
release.</td></tr>
</tbody>
</table>
<div class="section" id="defining-a-tool">
<h2>Defining a tool<a class="headerlink" href="#defining-a-tool" title="Permalink to this headline">¶</a></h2>
<p>Literally Canvas is developed in CoffeeScript, and all of our internal examples
use CoffeeScript, so this example will be in CoffeeScript. We will add
documentation in JavaScript if there is sufficient demand. (As usual, please
express demand via GitHub issues.)</p>
<p>Plain JavaScript should work just fine as long as we can call <tt class="docutils literal"><span class="pre">new</span> <span class="pre">Tool()</span></tt>
and get back something that works.</p>
<div class="highlight-coffeescript"><div class="highlight"><pre><span class="c1"># reimplementation of the built-in line tool</span>
<span class="k">class</span> <span class="nx">MyLine</span>
  <span class="nv">name: </span><span class="s">&#39;MyLine&#39;</span>
  <span class="nv">iconName: </span><span class="s">&#39;line&#39;</span>  <span class="c1"># imageURLPrefix/line.png is the full URL</span>

  <span class="c1"># strokeWidth is a magic property; see &#39;Options styles&#39; section below</span>
  <span class="nv">constructor: </span><span class="nf">-&gt;</span> <span class="vi">@strokeWidth = </span><span class="mi">5</span>
  <span class="nv">optionsStyle: </span><span class="s">&#39;stroke-width&#39;</span>

  <span class="c1"># lifecycle: mouse is down</span>
  <span class="nv">begin: </span><span class="nf">(x, y, lc) -&gt;</span>
    <span class="c1"># make the shape we will be working with, in this case a line</span>
    <span class="vi">@currentShape = </span><span class="nx">LC</span><span class="p">.</span><span class="nx">createShape</span><span class="p">(</span><span class="s">&#39;Line&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="nv">x1: </span><span class="nx">x</span><span class="p">,</span> <span class="nv">y1: </span><span class="nx">y</span><span class="p">,</span> <span class="nv">x2: </span><span class="nx">x</span><span class="p">,</span> <span class="nv">y2: </span><span class="nx">y</span><span class="p">,</span> <span class="nx">@strokeWidth</span><span class="p">,</span>
      <span class="nv">color: </span><span class="nx">lc</span><span class="p">.</span><span class="nx">getColor</span><span class="p">(</span><span class="s">&#39;primary&#39;</span><span class="p">)})</span>

  <span class="c1"># lifecycle: mouse is dragging</span>
  <span class="k">continue</span><span class="o">:</span> <span class="nf">(x, y, lc) -&gt;</span>
    <span class="c1"># update the shape based on latest state (just set the other end)</span>
    <span class="vi">@currentShape.x2 = </span><span class="nx">x</span>
    <span class="vi">@currentShape.y2 = </span><span class="nx">y</span>
    <span class="c1"># render the shape to the canvas without adding it to the drawing</span>
    <span class="nx">lc</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">@currentShape</span><span class="p">)</span>

  <span class="c1"># lifecycle: mouse was released</span>
  <span class="nv">end: </span><span class="nf">(x, y, lc) -&gt;</span>
    <span class="c1"># save the shape as part of the drawing</span>
    <span class="nx">lc</span><span class="p">.</span><span class="nx">saveShape</span><span class="p">(</span><span class="nx">@currentShape</span><span class="p">)</span>

<span class="c1"># now expose our custom tool to the user</span>
<span class="nx">LC</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="p">{</span><span class="nv">tools: </span><span class="p">[</span>
  <span class="nx">LC</span><span class="p">.</span><span class="nx">tools</span><span class="p">.</span><span class="nx">Pencil</span><span class="p">,</span>
  <span class="nx">LC</span><span class="p">.</span><span class="nx">tools</span><span class="p">.</span><span class="nx">Eraser</span><span class="p">,</span>
  <span class="nx">LC</span><span class="p">.</span><span class="nx">tools</span><span class="p">.</span><span class="nx">MyLine</span><span class="p">,</span>  <span class="c1"># here it is!</span>
  <span class="nx">LC</span><span class="p">.</span><span class="nx">tools</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">,</span>
  <span class="nx">LC</span><span class="p">.</span><span class="nx">tools</span><span class="p">.</span><span class="nx">Text</span><span class="p">,</span>
  <span class="nx">LC</span><span class="p">.</span><span class="nx">tools</span><span class="p">.</span><span class="nx">Pan</span><span class="p">,</span>
  <span class="nx">LC</span><span class="p">.</span><span class="nx">tools</span><span class="p">.</span><span class="nx">Eyedropper</span>
<span class="p">]})</span>
</pre></div>
</div>
<p>Tools can call any method on the given <a class="reference internal" href="LiterallyCanvas.html#LiterallyCanvas" title="LiterallyCanvas"><tt class="xref js js-class docutils literal"><span class="pre">LiterallyCanvas()</span></tt></a>. Usually
you&#8217;ll be drawing and adding shapes, but you can also set colors, pan, zoom,
trigger events, and more.</p>
</div>
<div class="section" id="options-styles">
<h2>Options styles<a class="headerlink" href="#options-styles" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is the roughest edge of the extensibility API. You may need to make
minor changes to your custom tools in the future when we improve it.</p>
</div>
<p>When you activate a tool, the bottom toolbar changes to show the tool&#8217;s current
state. The two built-in options styles are <tt class="docutils literal"><span class="pre">'stroke-width'</span></tt> and <tt class="docutils literal"><span class="pre">font</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">stroke-width</span></tt> style will &#8220;magically&#8221; set <tt class="docutils literal"><span class="pre">tool.strokeWidth</span></tt> on the
active tool when the user clicks an option.</p>
<p>The <tt class="docutils literal"><span class="pre">font</span></tt> style will set <tt class="docutils literal"><span class="pre">tool.text</span></tt> to the user-entered text, and
<tt class="docutils literal"><span class="pre">tool.font</span></tt> to a canvas-compatible font string like <tt class="docutils literal"><span class="pre">italic</span> <span class="pre">18px</span> <span class="pre">Garamond</span></tt>.</p>
<p>To define your own options style, use this function:</p>
<dl class="function">
<dt id="LC.defineOptionsStyle">
<tt class="descclassname">LC.</tt><tt class="descname">defineOptionsStyle</tt><big>(</big><em>identifier</em>, <em>ReactComponent</em><big>)</big><a class="headerlink" href="#LC.defineOptionsStyle" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>identifier</strong> &#8211; String used as the value of <cite>tool.optionsStyle</cite> to attach this options
style to that tool.</li>
<li><strong>ReactComponent</strong> &#8211; A React component taking the props <tt class="docutils literal"><span class="pre">lc</span></tt> and <tt class="docutils literal"><span class="pre">tool</span></tt>. <tt class="docutils literal"><span class="pre">lc</span></tt> is the
<a class="reference internal" href="LiterallyCanvas.html#LiterallyCanvas" title="LiterallyCanvas"><tt class="xref js js-class docutils literal"><span class="pre">LiterallyCanvas()</span></tt></a> instance, and <tt class="docutils literal"><span class="pre">tool</span></tt> is the tool instance.
This component will be inserted into the bottom toolbar.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>For examples, read the source files <tt class="docutils literal"><span class="pre">src/optionsStyles/stroke-width.coffee</span></tt>
and <tt class="docutils literal"><span class="pre">src/optionsStyles/font.coffee</span></tt>. If you need additional assistance, and
<em>already understand React.js</em>, please ask the mailing list for help. Our
response time is great.</p>
<p>You should open GitHub issues if you would like specific UI or code
improvements to the existing options styles, or if you think a new kind of
generalized option style would helpful.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Creating Tools</a><ul>
<li><a class="reference internal" href="#defining-a-tool">Defining a tool</a></li>
<li><a class="reference internal" href="#options-styles">Options styles</a></li>
</ul>
</li>
</ul>
<p>
	<a href="https://github.com/literallycanvas/literallycanvas/archive/v0.4.0.tar.gz">
		Download v0.4.0 (npm/source)
	</a>
</p>

<p>
  <a href="https://github.com/literallycanvas/literallycanvas/archive/v0.4.0-bower.tar.gz">
    Download v0.4.0 (bower/bare js)
  </a>
</p>

<p>
  Send a message to
  <br><a href="mailto:literallycanvas@librelist.com">
    literallycanvas@librelist.com</a><br>
  to join our mailing list.
</p>

<p>
  Help us improve Literally Canvas on
	<a href="http://github.com/literallycanvas/literallycanvas">GitHub</a>.
</p>
<form class="search" action="../search.html" method="get">
  <input type="text" name="q"
   placeholder="type to search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="shapes.html" title="Previous document">Shapes</a>
        </li>
        <li>
          <a href="util.html" title="Next document">Utilities</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Home</a></li>
      <li>
        <a href="index.html">API</a>
      </li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2012-2013 Literally Canvas contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      1.2b3
        with the <a href="http://github.com/irskep/sphinx-better-theme">
          better</a> theme.

  </footer>

  
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-36534121-1', 'literallycanvas.com');
      ga('send', 'pageview');
    </script>
  
  </body>
</html>